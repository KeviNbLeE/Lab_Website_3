<% include ../partials/header %>
<% include ../partials/menu %>
	<div class="container">
		<br>
		<div class="jumbotron">
		  <h1 class="display-4">Fall 2018 Stats</h1>
		  <p class="lead">Detailed information on how the Buffs are doing in the 2018 Football Season!</p>
		</div>

		<table class="table table-bordered" id="stats_table">
			<tr>
				<th class="align-bottom" rowspan="2">Game Date</th>
				<th class="align-bottom"rowspan="2">Opposing Team Name</th>
				<th class="text-center" colspan="2">Score</th>
				<th class="align-bottom" rowspan="2">Winner</th>
			</tr>
			<tr>
				<th>Home Score</th>
				<th>Opp. Score</th>
			</tr>
			<!-- TODO: Iterate over the Football_table data here
						1. Display the information for each row (date, name, home score, visitor score)
						2. Determine who the winner is and display it in the final column
			-->
			<%
			if(data){
				var table_data = ''
					for (var i = 0; i < data.length; i++) {
						table_data += '<tr><td>' + data[i].game_date +'</td>';
						table_data += '<td>' + data[i].visitor_name +'</td>';
						table_data += '<td>' + data[i].home_score +'</td>';
						table_data += '<td>' + data[i].visitor_score +'</td>';
						var home_data = data[i].home_score;
						var visitor_data = data[i].visitor_score;
						if(home_data > visitor_data){
							table_data += '<td>' + 'CU Boulder' +'</td></tr>';
						}
						else{
							table_data += '<td>' + data[i].visitor_name +'</td></tr>';
						}
					}
		%>
		<%- rows %>
		<%}%>

		</table>
		<br>
		<table class="table text-center">
			<tr>
				<th>Wins</th>
				<th>Losses</th>
			</tr>
			<tr>
				<%
					if(data){
						var win_count = 0
						var loss_count = 0

						for(var i = 0; i <data.length; i++){
							if(data[i].home_score > data[i].visitor_score){
								win_count++
							}
							else{
								loss_count++
							}
						}
						%>
					<%}%>
				<td> <!-- TODO: Display the total number of wins here.
							    This value should come from your server.js files query, don't calculate it in this file! -->
					<%- win_count %>
				</td>

				<td> <!-- TODO: Display the total number of losses here.
							    This value should come from your server.js files query, don't calculate it in this file! -->
					<%- loss_count %>
				</td>
			</tr>
		</table>

	</div>
<% include ../partials/footer %>
